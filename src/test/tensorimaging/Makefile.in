curdir=$(vigra_testdir)/tensorimaging

TESTIMAGES = l2.xv riesz00.xv riesz10.xv riesz01.xv riesz20.xv riesz11.xv riesz02.xv boundaryTensor.xv l2_boundary1.xv l2_boundary.xv l2_hourglass.xv l2_get.xv

test: test.o $(TESTIMAGES) $(PREINSTALL_IMPEX_LIB)
	$(CXX) -o test test.o $(PREINSTALL_IMPEX_LIB) $(IMPEX_DEPLIBS)
	./test || { rm ./test$(EXEEXT) ; exit 1; }

tensorimaging.exe: test.d
	devenv "..\test.sln" /build Release /project tensorimaging
	./tensorimaging.exe || { rm ./tensorimaging.exe ; exit 1; }

$(TESTIMAGES):
	ln -s $(curdir)/$@ .

include ../Makefile.include

ifneq "$(MAKECMDGOALS)" "clean"
include test.d
endif
