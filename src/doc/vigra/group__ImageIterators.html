<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><TITLE>VIGRA - VIGRA: Image Iterators</TITLE>
<link rel=stylesheet type="text/css" href="vigra.css">
</head>
<body  bgcolor="#f8f0e0" link="#0040b0" vlink="#a00040">
<basefont face="Helvetica,Arial,sans-serif" size=3>
<p align=right>
[ <a href="http://kogs-www.informatik.uni-hamburg.de/~koethe/vigra/">VIGRA Homepage</a> |
 <a href="functionindex.html">Function Index</a> |
 <a href="classes.html">Class Index</a> |
 <a href="namespaces.html">Namespaces</a> |
 <a href="files.html">File List</a> |
 <a href="index.html">Main Page</a> ]
</p>
<!-- Generated by Doxygen 1.5.6 -->
<div class="contents">
<table class="main_heading">
<tr>
<td align=left>
<A HREF ="#_details" ><IMG BORDER=0 ALT="details" SRC="documents/pfeilGross.gif"></A>
</td>
<td width="100%">Image Iterators
</td>
<td align=right><a href="http://kogs-www.informatik.uni-hamburg.de/~koethe/vigra/"><IMG border=0 ALT="VIGRA" SRC="documents/vigra.gif"></a></td></tr>
</table><p>
General image iterator definition and implementations.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvigra_1_1ConstImageIterator.html">ConstImageIterator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Standard 2D random access const iterator for images that store the data as a linear array.  <a href="classvigra_1_1ConstImageIterator.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvigra_1_1ConstStridedImageIterator.html">ConstStridedImageIterator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Const iterator to be used when pixels are to be skipped.  <a href="classvigra_1_1ConstStridedImageIterator.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvigra_1_1ConstValueIterator.html">ConstValueIterator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Iterator that always returns the constant specified in the constructor.  <a href="classvigra_1_1ConstValueIterator.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvigra_1_1ImageIterator.html">ImageIterator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Standard 2D random access iterator for images that store the data in a linear array.  <a href="classvigra_1_1ImageIterator.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvigra_1_1ImageIteratorBase.html">ImageIteratorBase</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Base class for 2D random access iterators.  <a href="classvigra_1_1ImageIteratorBase.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvigra_1_1IteratorTraits.html">IteratorTraits</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Export associated information for each image iterator.  <a href="structvigra_1_1IteratorTraits.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvigra_1_1StridedImageIterator.html">StridedImageIterator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Iterator to be used when pixels are to be skipped.  <a href="classvigra_1_1StridedImageIterator.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef Diff2D&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ImageIterators.html#g110ba64ad5460bac151be32b748da74b">CoordinateIterator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simulate an image where each pixel contains its coordinate.  <a href="#g110ba64ad5460bac151be32b748da74b"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2 class="details_section">Detailed Description</h2>
General image iterator definition and implementations. 
<p>
The following tables describe the general requirements for image iterators and their iterator traits. The iterator implementations provided here may be used for any image data type that stores its data as a linear array of pixels. The array will be interpreted as a row-major matrix with a particular width.  <h3>Requirements for Image Iterators</h3>
<p>
<table border="2" cellspacing="0" cellpadding="2" width="100%">
<tr>
<th colspan="2>">Local Types </th><th>Meaning   </th></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#d618f240f2b743f553b20beac68bbaf8">ImageIterator::value_type</a></code></td><td>the underlying image's pixel type  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#c8456b73e94855de7203e3e337f2b872">ImageIterator::PixelType</a></code></td><td>the underlying image's pixel type  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#abedc6031d7df619a0c453c558af87a0">ImageIterator::reference</a></code> </td><td>the iterator's reference type (return type of <code>*iter</code>). Will be <code>value_type &amp;</code> for a mutable iterator, and convertible to <code>value_type const &amp;</code> for a const iterator.  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#f499f8cb218354b4e846a233590c15da">ImageIterator::index_reference</a></code> </td><td>the iterator's index reference type (return type of <code>iter[diff]</code>). Will be <code>value_type &amp;</code> for a mutable iterator, and convertible to <code>value_type const &amp;</code> for a const iterator.  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIterator.html#a2158dc2d25210ef557a40d3b8a521e3">ImageIterator::pointer</a></code> </td><td>the iterator's pointer type (return type of <code>iter.operator-&gt;()</code>). Will be <code>value_type *</code> for a mutable iterator, and convertible to <code>value_type const *</code> for a const iterator.  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIterator.html#a4336e7fd692b20bda7b7227fa9c9f55">ImageIterator::difference_type</a></code> </td><td>the iterator's difference type (<code><a class="el" href="classvigra_1_1Diff2D.html" title="Two dimensional difference vector.">vigra::Diff2D</a></code>)  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#93321121482225e0577a134820fc5c6b">ImageIterator::iterator_category</a></code> </td><td>the iterator tag (<code>vigra::image_traverser_tag</code>)  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#68b7f1ca083eb038b4810c8926a83fce">ImageIterator::row_iterator</a></code></td><td>the associated row iterator  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#a92bdd7ecc849908fd104c12a8c89360">ImageIterator::column_iterator</a></code></td><td>the associated column iterator  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#d64d04a22091ee0a6ca2f5e51feb09b1">ImageIterator::MoveX</a></code></td><td>type of the horizontal navigator  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#f5ce768eaf7662dea4157a7f7e171921">ImageIterator::MoveY</a></code></td><td>type of the vertical navigator  </td></tr>
<tr>
<th>Operation </th><th>Result </th><th>Semantics   </th></tr>
<tr>
<td><code>++i.x<br>
i.x--</code></td><td><code>void</code></td><td>increment x-coordinate  </td></tr>
<tr>
<td><code>--i.x<br>
i.x--</code></td><td><code>void</code></td><td>decrement x-coordinate  </td></tr>
<tr>
<td><code>i.x += dx</code></td><td><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#d64d04a22091ee0a6ca2f5e51feb09b1">ImageIterator::MoveX</a> &amp;</code> </td><td>add <code>dx</code> to x-coordinate  </td></tr>
<tr>
<td><code>i.x -= dx</code></td><td><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#d64d04a22091ee0a6ca2f5e51feb09b1">ImageIterator::MoveX</a> &amp;</code> </td><td>subtract <code>dx</code> from x-coordinate  </td></tr>
<tr>
<td><code>i.x - j.x</code></td><td><code>int</code> </td><td>difference of the x-coordinates of <code>i</code> and <code>j</code>  </td></tr>
<tr>
<td><code>i.x = j.x</code></td><td><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#d64d04a22091ee0a6ca2f5e51feb09b1">ImageIterator::MoveX</a> &amp;</code></td><td><code>i.x += j.x - i.x</code>  </td></tr>
<tr>
<td><code>i.x == i.y</code></td><td><code>bool</code></td><td><code>j.x - i.x == 0</code><p>
</td></tr>
<tr>
<td><code>i.x &lt; j.x</code></td><td><code>bool</code></td><td><code>j.x - i.x &gt; 0</code><p>
</td></tr>
<tr>
<td><code>++i.y<br>
i.y++</code></td><td><code>void</code></td><td>increment y-coordinate  </td></tr>
<tr>
<td><code>--i.y<br>
i.y--</code></td><td><code>void</code></td><td>decrement y-coordinate  </td></tr>
<tr>
<td><code>i.y += dy</code></td><td><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#f5ce768eaf7662dea4157a7f7e171921">ImageIterator::MoveY</a> &amp;</code> </td><td>add <code>dy</code> to y-coordinate  </td></tr>
<tr>
<td><code>i.y -= dy</code></td><td><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#f5ce768eaf7662dea4157a7f7e171921">ImageIterator::MoveY</a> &amp;</code> </td><td>subtract <code>dy</code> from y-coordinate  </td></tr>
<tr>
<td><code>i.y - j.y</code></td><td><code>int</code> </td><td>difference of the y-coordinates of <code>i</code> and <code>j</code>  </td></tr>
<tr>
<td><code>i.y = j.y</code></td><td><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#f5ce768eaf7662dea4157a7f7e171921">ImageIterator::MoveY</a> &amp;</code></td><td><code>i.y += j.y - i.y</code>  </td></tr>
<tr>
<td><code>i.y == j.y</code></td><td><code>bool</code></td><td><code>j.y - i.y == 0</code><p>
</td></tr>
<tr>
<td><code>i.y &lt; j.y</code></td><td><code>bool</code></td><td><code>j.y - i.y &gt; 0</code>  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIterator.html" title="Standard 2D random access iterator for images that store the data in a linear array...">ImageIterator</a> k(i)</code></td><td>copy constructor  </td></tr>
<tr>
<td><code>k = i</code></td><td><code><a class="el" href="classvigra_1_1ImageIterator.html" title="Standard 2D random access iterator for images that store the data in a linear array...">ImageIterator</a> &amp;</code></td><td>assignment  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIterator.html" title="Standard 2D random access iterator for images that store the data in a linear array...">ImageIterator</a> k</code></td><td>default constructor  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#68b7f1ca083eb038b4810c8926a83fce">ImageIterator::row_iterator</a> r(i)</code></td><td>construction of row iterator  </td></tr>
<tr>
<td colspan="2>"><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#a92bdd7ecc849908fd104c12a8c89360">ImageIterator::column_iterator</a> c(i)</code></td><td>construction of column iterator  </td></tr>
<tr>
<td><code>i += diff</code></td><td><code><a class="el" href="classvigra_1_1ImageIterator.html" title="Standard 2D random access iterator for images that store the data in a linear array...">ImageIterator</a> &amp;</code> </td><td><code>{ i.x += diff.x<br>
i.y += diff.y; }</code>  </td></tr>
<tr>
<td><code>i -= diff</code></td><td><code><a class="el" href="classvigra_1_1ImageIterator.html" title="Standard 2D random access iterator for images that store the data in a linear array...">ImageIterator</a> &amp;</code> </td><td><code>{ i.x -= diff.x<br>
i.y -= diff.y; }</code>  </td></tr>
<tr>
<td><code>i + diff</code></td><td><code><a class="el" href="classvigra_1_1ImageIterator.html" title="Standard 2D random access iterator for images that store the data in a linear array...">ImageIterator</a></code> </td><td><code>{ <a class="el" href="classvigra_1_1ImageIterator.html" title="Standard 2D random access iterator for images that store the data in a linear array...">ImageIterator</a> tmp(i);<br>
tmp += diff;<br>
return tmp; }</code>  </td></tr>
<tr>
<td><code>i - diff</code></td><td><code><a class="el" href="classvigra_1_1ImageIterator.html" title="Standard 2D random access iterator for images that store the data in a linear array...">ImageIterator</a></code> </td><td><code>{ <a class="el" href="classvigra_1_1ImageIterator.html" title="Standard 2D random access iterator for images that store the data in a linear array...">ImageIterator</a> tmp(i);<br>
tmp -= diff;<br>
return tmp; }</code>  </td></tr>
<tr>
<td><code>i - j</code></td><td><code><a class="el" href="classvigra_1_1ImageIterator.html#a4336e7fd692b20bda7b7227fa9c9f55">ImageIterator::difference_type</a></code> </td><td><code>{ <a class="el" href="classvigra_1_1ImageIterator.html#a4336e7fd692b20bda7b7227fa9c9f55">ImageIterator::difference_type</a> tmp(i.x - j.x, i.y - j.y);<br>
return tmp; }</code>  </td></tr>
<tr>
<td><code>i == j</code></td><td><code>bool</code> </td><td><code>i.x == j.x &amp;&amp; i.y == j.y</code>  </td></tr>
<tr>
<td><code>*i</code></td><td><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#abedc6031d7df619a0c453c558af87a0">ImageIterator::reference</a></code> </td><td>access the current pixel  </td></tr>
<tr>
<td><code>i[diff]</code></td><td><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#f499f8cb218354b4e846a233590c15da">ImageIterator::index_reference</a></code> </td><td>access pixel at offset <code>diff</code>  </td></tr>
<tr>
<td><code>i(dx, dy)</code></td><td><code><a class="el" href="classvigra_1_1ImageIteratorBase.html#f499f8cb218354b4e846a233590c15da">ImageIterator::index_reference</a></code> </td><td>access pixel at offset <code>(dx, dy)</code>  </td></tr>
<tr>
<td><code>i-&gt;member()</code></td><td>depends on operation </td><td>call member function of underlying pixel type via <code>operator-&gt;</code> of iterator  </td></tr>
<tr>
<td colspan="3>"><code>i, j, k</code> are of type <code><a class="el" href="classvigra_1_1ImageIterator.html" title="Standard 2D random access iterator for images that store the data in a linear array...">ImageIterator</a></code><br>
 <code>diff</code> is of type <code><a class="el" href="classvigra_1_1ImageIterator.html#a4336e7fd692b20bda7b7227fa9c9f55">ImageIterator::difference_type</a></code><br>
 <code>dx, dy</code> are of type <code>int</code><br>
   </td></tr>
</table>
<h3>Requirements for Image Iterator Traits</h3>
<p>
The following iterator traits must be defined for an image iterator:  <p>
<table border="2" cellspacing="0" cellpadding="2" width="100%">
<tr>
<th>Types </th><th>Meaning   </th></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::Iterator</code></td><td>the iterator type the traits are referring to  </td></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::iterator</code></td><td>the iterator type the traits are referring to  </td></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::value_type</code></td><td>the underlying image's pixel type  </td></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::reference</code> </td><td>the iterator's reference type (return type of <code>*iter</code>)  </td></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::index_reference</code> </td><td>the iterator's index reference type (return type of <code>iter[diff]</code>)  </td></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::pointer</code> </td><td>the iterator's pointer type (return type of <code>iter.operator-&gt;()</code>)  </td></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::difference_type</code> </td><td>the iterator's difference type  </td></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::iterator_category</code> </td><td>the iterator tag (<code>vigra::image_traverser_tag</code>)  </td></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::row_iterator</code></td><td>the associated row iterator  </td></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::column_iterator</code></td><td>the associated column iterator  </td></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::DefaultAccessor</code> </td><td>the default accessor to be used with the iterator  </td></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::default_accessor</code> </td><td>the default accessor to be used with the iterator  </td></tr>
<tr>
<td><code>IteratorTraits&lt;ImageIterator&gt;::hasConstantStrides</code> </td><td>whether the iterator uses constant strides on the underlying memory (always <code>VigraTrueType</code> for <code><a class="el" href="classvigra_1_1ImageIterator.html" title="Standard 2D random access iterator for images that store the data in a linear array...">ImageIterator</a></code>s).  </td></tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="g110ba64ad5460bac151be32b748da74b"></a><!-- doxytag: member="vigra::CoordinateIterator" ref="g110ba64ad5460bac151be32b748da74b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Diff2D CoordinateIterator          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Simulate an image where each pixel contains its coordinate. 
<p>
CoordinateIterator used to be a separate class, but has now become an alias for <a class="el" href="classvigra_1_1Diff2D.html">vigra::Diff2D</a>. This is possible because <a class="el" href="classvigra_1_1Diff2D.html" title="Two dimensional difference vector.">Diff2D</a> now provides all the necessary functionality.<p>
CoordinateIterator behaves like a read-only <a class="el" href="classvigra_1_1ImageIterator.html">vigra::ImageIterator</a> for an image in which each pixel contains its coordinate. This is useful for algorithms that need access to the current pixel's location. For example, you can use CoordinateIterator/Diff2D to find the center of mass of an image region. To implement this, we first need a functor for center-of-mass calculations:<p>
<div class="fragment"><pre class="fragment">    <span class="keyword">struct </span>CenterOfMassFunctor
    {
        CenterOfMassFunctor()
        : x(0.0), y(0.0), size(0)
        {}

        <span class="keywordtype">void</span> operator()(Diff2d <span class="keyword">const</span>&amp; diff)
        {
            ++size;
            x += diff.x;
            y += diff.y;
        }

        <span class="keywordtype">float</span> xCenter()<span class="keyword"> const</span>
<span class="keyword">        </span>{   <span class="keywordflow">return</span> x / size; }

        <span class="keywordtype">float</span> yCenter()<span class="keyword"> const</span>
<span class="keyword">        </span>{   <span class="keywordflow">return</span> y / size; }

        <span class="keywordtype">float</span> x;
        <span class="keywordtype">float</span> y;
        <span class="keywordtype">int</span> size;
    };
</pre></div><p>
Using this functor, we find the center of mass like so:<p>
<div class="fragment"><pre class="fragment">    <a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::BImage</a> img(w,h);
    ... <span class="comment">// mark a region in the image with '1', background with '0'</span>

    CenterOfMassFunctor center;

    <a class="code" href="group__InspectAlgo.html#gd3a0f1639b3ceff1766a100f29a87fb1" title="Apply read-only functor to every pixel in the ROI.">vigra::inspectImageIf</a>(
        srcIterRange(Diff2D(), Diff2D() + img.size()),
        srcImage(img),
        center);

    std::cout &lt;&lt; <span class="stringliteral">"Center of mass: "</span> &lt;&lt; center.xCenter() &lt;&lt;
                                <span class="stringliteral">", "</span> &lt;&lt; center.yCenter() &lt;&lt; std::endl;
</pre></div><p>
<b>#include</b> &lt;<a href="imageiterator_8hxx-source.html">vigra/imageiterator.hxx</a>&gt;<p>
Namespace: <a class="el" href="namespacevigra.html">vigra</a> 
</div>
</div><p>
</div>
<!-- footer.html -->
<p>
<table border=0 cellspacing=0 width="100%"  bgcolor="#e0d0a0" cellpadding=5>
<tr>
<td>
<p>
<i>&copy; <A HREF="http://hci.iwr.uni-heidelberg.de/people/ukoethe/">Ullrich K&ouml;the</A>     (<A
HREF="mailto:ullrich.koethe@iwr.uni-heidelberg.de">ullrich.koethe@iwr.uni-heidelberg.de</A>)</i> <br>
<i><A HREF="http://hci.iwr.uni-heidelberg.de/">
Heidelberg Collaboratory for Image Processing</a>,
University of Heidelberg, Germany</i>
<td>
<p align=right>
<I>html generated using <A HREF="http://www.doxygen.org">doxygen</A> and <A HREF="http://www.python.org">Python</A></I>
<br>
<i>
VIGRA 1.6.0 (13 Aug 2008)
</i>
</tr>
</table>


</BODY>
</HTML>
