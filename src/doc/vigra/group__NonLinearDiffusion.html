<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><TITLE>VIGRA - VIGRA: Non-linear Diffusion</TITLE>
<link rel=stylesheet type="text/css" href="vigra.css">
</head>
<body  bgcolor="#f8f0e0" link="#0040b0" vlink="#a00040">
<basefont face="Helvetica,Arial,sans-serif" size=3>
<p align=right>
[ <a href="http://kogs-www.informatik.uni-hamburg.de/~koethe/vigra/">VIGRA Homepage</a> |
 <a href="functionindex.html">Function Index</a> |
 <a href="classes.html">Class Index</a> |
 <a href="namespaces.html">Namespaces</a> |
 <a href="files.html">File List</a> |
 <a href="index.html">Main Page</a> ]
</p>
<!-- Generated by Doxygen 1.5.6 -->
<div class="contents">
<table class="main_heading">
<tr>
<td align=left>
<A HREF ="#_details" ><IMG BORDER=0 ALT="details" SRC="documents/pfeilGross.gif"></A>
</td>
<td width="100%">Non-linear Diffusion
</td>
<td align=right><a href="http://kogs-www.informatik.uni-hamburg.de/~koethe/vigra/"><IMG border=0 ALT="VIGRA" SRC="documents/vigra.gif"></a></td></tr>
</table><p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvigra_1_1DiffusivityFunctor.html">DiffusivityFunctor</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Diffusivity functor for non-linear diffusion.  <a href="classvigra_1_1DiffusivityFunctor.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;... &gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__NonLinearDiffusion.html#g9dbd0f3b85ce44ba56362624d0e2e02f">nonlinearDiffusion</a> (...)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Perform edge-preserving smoothing at the given scale.  <a href="#g9dbd0f3b85ce44ba56362624d0e2e02f"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2 class="details_section">Detailed Description</h2>
Perform edge-preserving smoothing. <hr><h2>Function Documentation</h2>
<a class="anchor" name="g9dbd0f3b85ce44ba56362624d0e2e02f"></a><!-- doxytag: member="vigra::nonlinearDiffusion" ref="g9dbd0f3b85ce44ba56362624d0e2e02f" args="(...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td colspan="4" class="memtemplate">template&lt;... &gt; </td></tr><tr>
          <td class="memname">void vigra::nonlinearDiffusion           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Perform edge-preserving smoothing at the given scale. 
<p>
The algorithm solves the non-linear diffusion equation<p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ \frac{\partial}{\partial t} u = \frac{\partial}{\partial x} \left( g(|\nabla u|) \frac{\partial}{\partial x} u \right) \]" src="form_55.png">
<p>
<p>
where <em> t</em> is the time, <b> x</b> is the location vector, <em> u(</em><b> x</b><em> , t)</em> is the smoothed image at time <em> t</em>, and <em> g(.)</em> is the location dependent diffusivity. At time zero, the image <em> u(</em><b> x</b><em> , 0)</em> is simply the original image. The time is propotional to the square of the scale parameter: <img class="formulaInl" alt="$t = s^2$" src="form_56.png">. The diffusion equation is solved iteratively according to the Additive Operator Splitting Scheme (AOS) from<p>
J. Weickert: <em>"Recursive Separable Schemes for Nonlinear Diffusion Filters"</em>, in: B. ter Haar Romeny, L. Florack, J. Koenderingk, M. Viergever (eds.): 1st Intl. Conf. on Scale-Space Theory in Computer Vision 1997, Springer LNCS 1252<p>
<code><a class="el" href="classvigra_1_1DiffusivityFunctor.html" title="Diffusivity functor for non-linear diffusion.">DiffusivityFunctor</a></code> implements the gradient dependent local diffusivity. It is passed as an argument to <a class="el" href="group__TransformAlgo.html#g0984be21e44cc065d3ec658e76c90186">gradientBasedTransform()</a>. The return value must be between 0 and 1 and determines the weight a pixel gets when its neighbors are smoothed. Weickert recommends the use of the diffusivity implemented by class <a class="el" href="classvigra_1_1DiffusivityFunctor.html">DiffusivityFunctor</a>. It's also possible to use other functors, for example one that always returns 1, in which case we obtain the solution to the linear diffusion equation, i.e. <a class="el" href="classvigra_1_1Gaussian.html">Gaussian</a> convolution.<p>
The source value type must be a linear space with internal addition, scalar multiplication, and NumericTraits defined. The value_type of the <a class="el" href="classvigra_1_1DiffusivityFunctor.html" title="Diffusivity functor for non-linear diffusion.">DiffusivityFunctor</a> must be the scalar field over wich the source value type's linear space is defined.<p>
In addition to <code><a class="el" href="group__NonLinearDiffusion.html#g9dbd0f3b85ce44ba56362624d0e2e02f" title="Perform edge-preserving smoothing at the given scale.">nonlinearDiffusion()</a></code>, there is an algorithm <code>nonlinearDiffusionExplicit()</code> which implements the Explicit Scheme described in the above article. Both algorithms have the same interface, but the explicit scheme gives slightly more accurate approximations of the diffusion process at the cost of much slower processing.<p>
<b> Declarations:</b><p>
pass arguments explicitly: <div class="fragment"><pre class="fragment">    <span class="keyword">namespace </span>vigra {
        <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,
                  <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,
                  <span class="keyword">class </span>DiffusivityFunctor&gt;
        <span class="keywordtype">void</span> <a class="code" href="group__NonLinearDiffusion.html#g9dbd0f3b85ce44ba56362624d0e2e02f" title="Perform edge-preserving smoothing at the given scale.">nonlinearDiffusion</a>(SrcIterator sul, SrcIterator slr, SrcAccessor as,
                                DestIterator dul, DestAccessor ad,
                                DiffusivityFunctor <span class="keyword">const</span> &amp; weight, <span class="keywordtype">double</span> scale);
    }
</pre></div><p>
use argument objects in conjunction with <a class="el" href="ArgumentObjectFactories.html">Argument Object Factories</a> : <div class="fragment"><pre class="fragment">    <span class="keyword">namespace </span>vigra {
        <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,
                  <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,
                  <span class="keyword">class </span>DiffusivityFunctor&gt;
        <span class="keywordtype">void</span> <a class="code" href="group__NonLinearDiffusion.html#g9dbd0f3b85ce44ba56362624d0e2e02f" title="Perform edge-preserving smoothing at the given scale.">nonlinearDiffusion</a>(
                  triple&lt;SrcIterator, SrcIterator, SrcAccessor&gt; src,
                  pair&lt;DestIterator, DestAccessor&gt; dest,
                  DiffusivityFunctor <span class="keyword">const</span> &amp; weight, <span class="keywordtype">double</span> scale);
    }
</pre></div><p>
<b> Usage:</b><p>
<b>#include</b> &lt;<a href="nonlineardiffusion_8hxx-source.html">vigra/nonlineardiffusion.hxx</a>&gt;<p>
<div class="fragment"><pre class="fragment">    <a class="code" href="group__StandardImageTypes.html#g1170a9252f2ce52a075238e327ec78f0">FImage</a> src(w,h), dest(w,h);
    <span class="keywordtype">float</span> edge_threshold, scale;
    ...
    
    <a class="code" href="group__NonLinearDiffusion.html#g9dbd0f3b85ce44ba56362624d0e2e02f" title="Perform edge-preserving smoothing at the given scale.">nonlinearDiffusion</a>(srcImageRange(src), destImage(dest),
                       DiffusivityFunctor&lt;float&gt;(edge_threshold), scale);
</pre></div><p>
<b> Required Interface:</b><p>
<ul>
<li>
<code>SrcIterator</code> and <code>DestIterator</code> are models of <a class="el" href="classvigra_1_1ImageIterator.html" title="Standard 2D random access iterator for images that store the data in a linear array...">ImageIterator</a> </li>
<li>
<code>SrcAccessor</code> and <code>DestAccessor</code> are models of <a class="el" href="classvigra_1_1StandardAccessor.html" title="Encapsulate access to the values an iterator points to.">StandardAccessor</a> </li>
<li>
<code>SrcAccessor::value_type</code> is a linear space </li>
<li>
<code><a class="el" href="classvigra_1_1DiffusivityFunctor.html" title="Diffusivity functor for non-linear diffusion.">DiffusivityFunctor</a></code> conforms to the requirements of <a class="el" href="group__TransformAlgo.html#g0984be21e44cc065d3ec658e76c90186">gradientBasedTransform()</a>. Its range is between 0 and 1. </li>
<li>
<code><a class="el" href="classvigra_1_1DiffusivityFunctor.html#04f69f8f2936ff309627511179c1709b">DiffusivityFunctor::value_type</a></code> is an algebraic field<p>
</li>
</ul>
<p>
<b> Precondition:</b><p>
<code>scale &gt; 0</code> 
</div>
</div><p>
</div>
<!-- footer.html -->
<p>
<table border=0 cellspacing=0 width="100%"  bgcolor="#e0d0a0" cellpadding=5>
<tr>
<td>
<p>
<i>&copy; <A HREF="http://hci.iwr.uni-heidelberg.de/people/ukoethe/">Ullrich K&ouml;the</A>     (<A
HREF="mailto:ullrich.koethe@iwr.uni-heidelberg.de">ullrich.koethe@iwr.uni-heidelberg.de</A>)</i> <br>
<i><A HREF="http://hci.iwr.uni-heidelberg.de/">
Heidelberg Collaboratory for Image Processing</a>,
University of Heidelberg, Germany</i>
<td>
<p align=right>
<I>html generated using <A HREF="http://www.doxygen.org">doxygen</A> and <A HREF="http://www.python.org">Python</A></I>
<br>
<i>
VIGRA 1.6.0 (13 Aug 2008)
</i>
</tr>
</table>


</BODY>
</HTML>
